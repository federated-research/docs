import { Steps, Cards, Callout } from "nextra/components";

# Run analysis with All In One Demo

<Steps>

## Install Funnel

<Cards>

<Cards.Card

title="How to install Funnel"
href='/five_safes_tes/TES/install_funnel'
arrow

/>

</Cards>
## In the All In One repository change these settings:

Change these settings in the **_.env_** file:

```yaml copy filename=".env"

// Turn off Demo mode to execute analysis:
DemoMode = false

// Allow Keycloak to not require https:
KeyCloakDemoMode = true

// Set UseTESK to true:
UseTESK = true

// Set TesAPIUrl to the URL where the TES API executing agent is hosted. e.g Funnel or TES-K:
TesAPIUrl=http://<HostName>:8000/v1/tasks

// Output bucket prefix for the TES executing agent to write outputs to, default is s3 bucket prefix:
TesOutputBucketPrefix=s3://


```

If using a system-wide installation of `funnel` as the TES API executing agent then the `HostName` should be `host.docker.internal`.

<Callout type="info">
  Restart the containers to apply the new configuration.
</Callout>

</Steps>

## Submit a TES message

Once Funnel is running and the All In One is up and configured, you can submit a TES payload to the Submission Layer.

Note that the project access to the TRE must first be approved, see [project access to TRE guide](/tre_agent/guides/TREManagerApprovingProject).

<Cards>

<Cards.Card

title="Run Hello World"
href='/submission/tasks/quickstart'
arrow

/>

<Cards.Card

title="Run analysis workflow"
href='/submission/tasks/run_analysis'
arrow

/>

</Cards>
